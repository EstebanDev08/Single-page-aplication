(()=>{"use strict";function n(){const n=document.querySelector(".inpSearch");if(n.style.width="",n.classList.contains("inactive"))n.classList.remove("inactive");else{const e=n.value;""!==n.value?(document.querySelector("#contentSearch").innerHTML="",location.hash=`#/search/${e}`,n.classList.add("inactive")):n.classList.add("inactive")}}const e=async function({id:n="",prm:e=""}){try{const a=await fetch(`https://rickandmortyapi.com/api/character/${n}?${e}`);return await a.json()}catch(n){console.log(n)}},a=()=>""!==location.hash?location.hash.split("/").slice(1)[0].toLocaleLowerCase():"/";function c(){return location.hash.split("/")[2]}const t=async()=>{const t=document.getElementById("content"),i=document.getElementById("character"),s=document.querySelector(".Characters-inner"),o=document.querySelector(".error404-content"),r=document.getElementById("contentSearch"),l=document.querySelector("#filters");await(()=>{const e=document.getElementById("header");e.innerHTML="",e.innerHTML='\n\n\n<div class="Header-logo">\n    <h1>\n        <a href="/">\n            <img src="https://static.wikia.nocookie.net/rickandmorty/images/f/f4/Rick_and_Morty_Logo_and_Image.png"\n                alt="logo">\n        </a>\n    </h1>\n</div>\n<div class="Header-navbar">\n\n    <div action="" class="formSearch">\n\n        <a>\n        <img class="search-icon btnSearch" src="./src/icons/search.svg">\n        </a>\n\n        <input class="inpSearch inactive" type="text">\n\n\n    </div>\n\n</div>\n\n\n',document.querySelector(".btnSearch").addEventListener("click",n)})(),(()=>{function n(n,e){return()=>{if("search"===a()){const a=n;e.checked?location.hash.includes(a)||(location.hash+=a):location.hash.includes(a)&&(location.hash=location.hash.replace(a,""))}}}document.querySelector("#filters").innerHTML='\n        <div>\n            <p>Dead</p>\n            <input type="checkbox" class="checkDead btnFilter"> </input>\n        </div>\n\n        <div>\n            <p>Alive</p>\n            <input type="checkbox" class="checkAlive btnFilter"> </input>\n            </div>\n\n        <div>\n            <p>Male</p>\n            <input type="checkbox" class="checkMale btnFilter"> </input>\n            </div>\n\n        <div>\n            <p>Female</p>\n            <input type="checkbox" class="checkFemale btnFilter"> </input>\n            </div>\n\n\n\n',document.querySelector(".checkDead"),document.querySelector(".checkAlive"),document.querySelector(".checkMale"),document.querySelector(".checkFemale"),document.querySelectorAll(".btnFilter").forEach((e=>{e.classList.contains("checkDead")&&(location.hash.includes("&status=dead")&&(e.checked=!0),e.addEventListener("click",n("&status=dead",e))),e.classList.contains("checkAlive")&&(location.hash.includes("&status=alive")&&(e.checked=!0),e.addEventListener("click",n("&status=alive",e))),e.classList.contains("checkMale")&&(location.hash.includes("&gender=male")&&(e.checked=!0),e.addEventListener("click",n("&gender=male",e))),e.classList.contains("checkFemale")&&(location.hash.includes("&gender=female")&&(e.checked=!0),e.addEventListener("click",n("&gender=female",e)))}))})();let d=a(),h=await(n=>{let e;return"/"===n?e="/home":n>=0?e="/:id":"search"===n&&(e="/search"),e})(d);"/home"===h?(o?o.remove():console.log(),i?i.classList.remove("inactive"):console.log(""),s?s.remove():console.log(),r?r.classList.add("inactive"):console.log(""),l.classList.add("inactive"),await(async()=>{const n=document.getElementById("character");if(""===n.innerHTML){let a=`\n        \n        ${(await e({prm:"page=1}"})).results.map((n=>`\n            <article class="Character-item">\n                <a href="#/${n.id}/">\n                    <img src="${n.image}" alt="${n.name}">\n                     <div>   <h2>${n.name}</h2> </div>\n                </a>\n            </article>\n            `)).join("")}\n        \n        `;n.innerHTML=a}})()):"/:id"===h?(i?i.classList.add("inactive"):console.log(""),o?o.remove():console.log(),r?r.classList.add("inactive"):console.log(""),l.classList.add("inactive"),await(async()=>{const n=document.getElementById("content"),c=a(),t=await e({id:c});document.body.scrollTop=0,document.documentElement.scrollTop=0;const i=`\n\n<div class="Characters-inner">\n\n    <article class="Character-card">\n\n        <div><h2 class="character-name">${t.name}</h2></div>\n        <img src="${t.image}" alt="${t.name}">\n        \n    </article>\n    \n    <article class="Character-info">\n       <div> <h2>Details</h2> </div>\n\n       <div class="info-container">\n            <h3><span>Episodes:</span> <span>${t.episode.length}</span></h3>\n            <h3><span>Status:</span> <span>${t.status}</span></h3>\n            <h3><span>Species:</span> <span>${t.species}</span></h3>\n            <h3><span>Gender:</span> <span>${t.gender}</span></h3>\n            <h3><span>Origin:</span> <span>${t.origin.name}</span></h3>\n            <h3><span>Last location:</span> <span>${t.location.name}</span></h3>\n       </div> \n    </article>\n\n    <a>\n    <div class="button-principal character-button">\n        <h3>BACK</h3>\n    </div>\n</a>\n</div>\n\n`;n.innerHTML+=i,document.querySelector(".character-button").addEventListener("click",(()=>{history.back()}))})()):"/search"===h?(o?o.remove():console.log(),i?i.classList.add("inactive"):console.log(""),s?s.remove():console.log(),r?r.classList.remove("inactive"):console.log(""),l.classList.remove("inactive"),(async()=>{const n=c(),a=document.getElementById("contentSearch");if(a.innerHTML="",""===a.innerHTML)try{let c=`\n            \n            ${(await e({prm:`name=${n}`})).results.map((n=>`\n                <article class="Character-item">\n                    <a href="#/${n.id}/">\n                        <img src="${n.image}" alt="${n.name}">\n                         <div>   <h2>${n.name}</h2> </div>\n                    </a>\n                </article>\n                `)).join("")}\n            \n            `;a.innerHTML=c}catch(n){location.hash="#/error404/"}})()):(l.classList.add("inactive"),i?i.classList.add("inactive"):console.log(""),s?s.remove():console.log(),r?r.classList.add("inactive"):console.log(""),t.innerHTML+=await'\n\n<div class="error404-content">\n\n    <div class="error404-img">\n        <h2>404 NOT FOUND</h2>\n        <img src="./src/icons/rick.png" alt="rick sanchez">\n    </div>\n    <div class="error404-info">\n        <h2>Morty... this page doesn\'t exist in this universe.</h2>\n        <a href="/">\n            <div class="button-principal">\n                <h3>BACK TO HOME</h3>\n            </div>\n        </a>\n    </div>\n</div>\n\n')};let i=1,s=!0;const o=async function(n,{id:a,param:c}){const t=await e({id:a,prm:c}).then((n=>n.info.pages));if(i<t&&s){i++;let t=`\n        \n        ${(await e({prm:`page=${i}&${c}`,id:a})).results.map((n=>`\n            <article class="Character-item">\n                <a href="#/${n.id}/">\n                    <img src="${n.image}" alt="${n.name}">\n                     <div>   <h2>${n.name}</h2> </div>\n                </a>\n            </article>\n            `)).join("")}\n        \n    `;n.innerHTML+=t,s=!1}setTimeout((()=>{s=!0}),500)};window.addEventListener("load",t),window.addEventListener("hashchange",t),document.addEventListener("scroll",(async()=>{if(window.scrollY+window.innerHeight>=document.documentElement.scrollHeight)if(""===location.hash){const n=document.querySelector("#character");await o(n,{})}else if("search"===a()){const n=c(),e=document.querySelector("#contentSearch");await o(e,{param:`name=${n}`})}else console.log("no es el home")}))})();